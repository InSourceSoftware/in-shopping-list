<template>
  <div class="row">
    <div class="col-lg-4 col-md-6 col-sm-9">
      <form class="inline-form well">
        <div class="form-group">
          <label class="sr-only" for="listName">Name</label>
          <input type="text" id="listName" class="form-control form-label" value.bind="listName" placeholder="Shopping List" blur.trigger="saveProperties()" />
        </div>
        <div class="form-group pull-right">
          <button type="button" class="btn btn-sm btn-${isEditing ? 'success' : 'default'}" click.trigger="toggleEditing()">
            <span class="glyphicon glyphicon-${isEditing ? 'ok' : 'edit'}"></span>
            ${isEditing ? 'Done' : 'Edit'}
          </button>
        </div>
        <div class="form-group" show.bind="isEditing">
          <button type="button" class="btn btn-sm btn-danger" click.trigger="clearAll()">
            <span class="glyphicon glyphicon-remove"></span>
            Clear All
          </button>
          <button type="button" class="btn btn-sm btn-warning" click.trigger="clearPurchased()" show.bind="isPurchased">
            <span class="glyphicon glyphicon-remove"></span>
            Clear Purchased
          </button>
        </div>
        <div class="form-group" repeat.for="item of items">
          <button type="button" class="btn btn-xs btn-danger btn-delete" click.trigger="removeItem(item)" if.bind="isEditing">
            <span class="glyphicon glyphicon-remove"></span>
          </button>
          <label>
            <input type="checkbox" checked.bind="item.purchased" change.trigger="saveItems()" />
            <span class="${item.purchased ? 'purchased' : ''}" show.bind="!isEditing">${item.name}</span>
            <input type="text" class="form-control form-item ${item.purchased ? 'purchased' : ''}" value.bind="item.name" placeholder="Name" if.bind="isEditing" blur.trigger="saveItems()" />
          </label>
        </div>
        <div class="form-group">
          <div class="input-group">
            <div class="input-group-btn" show.bind="isEditing">
              <button type="submit" class="btn btn-sm btn-primary" click.trigger="addItem(name)">
                <span class="glyphicon glyphicon-plus"></span>
                Add
              </button>
            </div>
            <input type="text" class="form-control new-form-item" value.bind="name" placeholder="New Item" />
          </div>
        </div>
      </form>
    </div>
  </div>
</template>