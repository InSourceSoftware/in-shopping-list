<template>
  <div class="col-lg-4 col-md-6 col-sm-9">
    <form id="shopping-list" class="form-inline well">
      <fieldset>
        <div class="from-group">
          <label class="sr-only" for="name">List Name</label>
          <input type="text" id="name" class="form-control form-input form-label" placeholder="List Name" value.bind="name" change.trigger="saveProperties()" />
        </div>
        <div class="form-group pull-right">
          <label class="sr-only">
            <input type="checkbox" checked.bind="isEditing" />
          </label>
          <button type="button" class="btn btn-sm btn-${isEditing ? 'success' : 'default'}" click.trigger="toggleEditing()">
            <span class="glyphicon glyphicon-${isEditing ? 'ok' : 'edit'}" aria-hidden="true"></span>
            ${isEditing ? 'Done' : 'Edit'}
          </button>
        </div>
        <div class="form-group" show.bind="isEditing">
          <button type="button" class="btn btn-sm btn-danger" click.trigger="clearAll()">
            <span class="glyphicon glyphicon-remove" aria-hidden="true"></span> Clear All
          </button>
          <button type="button" class="btn btn-sm btn-warning" show.bind="isPurchased" click.trigger="clearPurchased()">
            <span class="glyphicon glyphicon-remove" aria-hidden="true"></span> Clear Purchased
          </button>
        </div>
        <div repeat.for="item of items">
          <div class="form-group form-item-group">
            <label class="form-item">
              <span class="btn-delete" if.bind="isEditing">
                <button type="button" class="btn btn-xs btn-danger" click.trigger="removeItem(item)">
                  <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                </button>
              </span>
              <input type="checkbox" checked.bind="item.purchased" change.trigger="saveItems()" />
              <span class="${item.purchased ? 'purchased' : ''}" show.bind="!isEditing">${item.name}</span>
              <input type="text" class="form-input ${item.purchased ? 'purchased' : ''}" placeholder="Item Name" value.bind="item.name" blur.trigger="saveItem(item)" if.bind="isEditing" />
            </label>
          </div>
        </div>
        <div class="form-group new-form-item">
          <div class="input-group">
            <span class="input-group-btn btn-add" show.bind="isEditing">
              <button type="submit" class="btn btn-sm btn-primary" click.trigger="addItem(itemName)">
                <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Add
              </button>
            </span>
            <label class="sr-only" for="itemName">Item</label>
            <input type="text" id="itemName" class="form-control form-input" placeholder="Item Name" value.bind="itemName" autocomplete="off" />
          </div>
        </div>
      </fieldset>
    </form>
  </div>
</template>